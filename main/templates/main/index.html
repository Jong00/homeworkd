<!doctype html>
<html lang="ko">
  <head>
    <!-- 필수 메타 태그 -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">

    <title>Django 웹 프로그램</title>
    <style>
      body { padding-bottom: 70px; } /* 하단 높이만큼 여백 확보 */

      /* 햄버거 아이콘 */
      .custom-toggler{display:flex;flex-direction:column;justify-content:center;cursor:pointer}
      .custom-toggler span{display:block;width:25px;height:3px;margin:4px 0;background-color:#fff}

      /* 사이드바 */
      .sidebar{position:fixed;top:0;left:-250px;width:250px;height:100%;background:#343a40;color:#fff;transition:left .3s ease;z-index:1050;padding-top:20px}
      .sidebar.active{left:0}
      .sidebar h5{text-align:center;margin-bottom:20px;font-weight:bold}
      .sidebar a{display:block;padding:12px 20px;color:#fff;text-decoration:none}
      .sidebar a:hover{background:#495057}

      /* 오버레이 */
      .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:none;z-index:1040}
      .overlay.active{display:block}

    </style>
  </head>
  <body>
    <!-- 네비게이션 바 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <!-- 햄버거 버튼 -->
      <div class="custom-toggler" id="menuToggle">
        <span></span><span></span><span></span>
      </div>

      <!-- 오른쪽 영역: 로그인 폼 / 로그아웃 버튼 토글 -->
      <div class="ml-auto d-flex align-items-center">
        <!-- 로그인 폼 (로그인 전) -->
        <div id="loginArea">
          <form class="form-inline" id="loginForm">
            <input class="form-control mr-2" 
                   id="userid"
                   type="text" 
                   placeholder="아이디" 
                   aria-label="아이디">
            <input class="form-control mr-2" 
                   id="userpw"
                   type="password" 
                   placeholder="비밀번호" 
                   aria-label="비밀번호">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">로그인</button>
          </form>
        </div>

        <!-- 로그아웃 버튼 (로그인 후) -->
        <div id="logoutArea" style="display:none;">
          <button class="btn btn-danger my-2 my-sm-0" id="logoutBtn">로그아웃</button>
        </div>
      </div>
    </nav>

    <!-- 왼쪽 슬라이드 메뉴 -->
    <div class="sidebar" id="sidebar">
      <h5>Week List</h5>
      <a href="#">1주차</a>
      <a href="#">2주차</a>
      <a href="#">3주차</a>
      <a href="#">4주차</a>
    </div>

    <!-- 오버레이 -->
    <div class="overlay" id="overlay"></div>

    <!-- 메인 섹션 -->
    <header class="jumbotron text-center bg-light mb-4">
      <h1 class="display-4">Django 웹 프로그램에 오신 것을 환영합니다!</h1>
      <p class="lead">이 프로젝트는 Django와 Bootstrap으로 제작된 간단한 웹 애플리케이션입니다.</p>
      <a class="btn btn-primary btn-lg" href="#" role="button">시작하기</a>
    </header>

    <!-- 중간 섹션 -->
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Test1</h5>
              <p class="card-text">설명1</p>
              <a href="#" class="btn btn-outline-primary btn-sm">자세히 보기</a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Test2</h5>
              <p class="card-text">설명2</p>
              <a href="#" class="btn btn-outline-success btn-sm">자세히 보기</a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Test3</h5>
              <p class="card-text">설명3</p>
              <a href="#" class="btn btn-outline-danger btn-sm">자세히 보기</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 하단 부분(항상 하단 고정) -->
    <footer class="bg-dark text-light text-center py-3 fixed-bottom">
      <p class="mb-0">&copy; 2025 Django Web Program | Built with Bootstrap</p>
    </footer>

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const menuToggle = document.getElementById('menuToggle');
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');

      // 햄버거 메뉴 토글
      menuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
      });
      overlay.addEventListener('click', () => {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
      });

      // 로그인/로그아웃 토글 관련 요소
      const loginArea  = document.getElementById('loginArea');
      const logoutArea = document.getElementById('logoutArea');
      const loginForm  = document.getElementById('loginForm');
      const logoutBtn  = document.getElementById('logoutBtn');

      // 페이지 로드 시 로그인 상태 반영
      document.addEventListener('DOMContentLoaded', () => {
        if (localStorage.getItem('loggedIn') === 'true') {
          // 로그인 상태 → 폼 숨기고 로그아웃 버튼 보이기
          if (loginArea)  loginArea.style.display  = 'none';
          if (logoutArea) logoutArea.style.display = 'block';
        } else {
          // 비로그인 상태 → 폼 보이고 로그아웃 버튼 숨기기
          if (loginArea)  loginArea.style.display  = 'block';
          if (logoutArea) logoutArea.style.display = 'none';
        }
      });

      // index의 로그인 폼은 login.html로 이동 (실제 로그인 처리 페이지)
      if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          window.location.href = '/login/';
        });
      }

      // 로그아웃: 상태 제거 후 현재 화면에서 로그인 폼 다시 보이기 (페이지 이동 없음)
      if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
          localStorage.removeItem('loggedIn');
          if (loginArea)  loginArea.style.display  = 'block';
          if (logoutArea) logoutArea.style.display = 'none';
        });
      }
    </script>
  </body>
</html>
